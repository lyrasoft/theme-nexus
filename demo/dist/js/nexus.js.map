{"version":3,"sources":["src/js/nexus.ts"],"names":[],"mappings":"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","file":"nexus.js","sourcesContent":["\nimport '@main';\nimport type { UnicornApp } from '@windwalker-io/unicorn';\n\nclass NexusTheme {\n  static install(app: UnicornApp, options?: any): void {\n    const nexus = app.$nexus = new this(app);\n  }\n\n  constructor(public app: UnicornApp) {\n    //\n  }\n\n  initRipple() {\n    if (!window.Ribble) {\n      return;\n    }\n\n    u.directive('ripple', {\n      mounted(el, { value }) {\n        if (value) {\n          value = JSON.parse(value);\n        } else {\n          value = undefined;\n        }\n\n        Ribble.attachEvent(el, value);\n      }\n    });\n\n    const buttons = document.querySelector('#admin-toolbar')\n      ?.querySelectorAll<HTMLAnchorElement | HTMLButtonElement>('a, button') || [];\n\n    for (const button of buttons) {\n      Ribble.attachEvent(button);\n    }\n  }\n\n  initSidebarToggle() {\n    const toggler = document.querySelector('[data-nx-toggle=\"sidebar\"]');\n\n    toggler?.addEventListener('click', () => {\n      if (window.innerWidth <= 991) {\n        document.body.classList.remove('sidebar-collapsed');\n        document.body.classList.toggle('sidebar-enabled');\n      } else {\n        document.body.classList.remove('sidebar-enabled');\n        document.body.classList.toggle('sidebar-collapsed');\n      }\n    });\n  }\n\n  initSidebarMenu() {\n    const menuButtons = document.querySelectorAll<HTMLDivElement>('.l-sidebar .dropdown-toggle');\n\n    for (const menuButton of menuButtons) {\n      const menu = menuButton.closest('.dropdown')?.querySelector('.dropdown-menu');\n\n      if (!menu) {\n        continue;\n      }\n\n      const menuCollapse = u.$ui.bootstrap.collapse(menu, { toggle: false });\n\n      menuButton.addEventListener('click', () => {\n        const show = menuButton.classList.toggle('show');\n\n        if (show) {\n          menuCollapse.show();\n        } else {\n          menuCollapse.hide();\n        }\n      });\n    }\n  }\n\n  initFullscreen() {\n    const fullScreenButtons = document.querySelectorAll<HTMLAnchorElement|HTMLButtonElement>('[data-nx-toggle=fullscreen]');\n\n    for (const fullScreenButton of fullScreenButtons) {\n      fullScreenButton.addEventListener('click', () => {\n        if (!document.fullscreenElement) {\n          let el: HTMLElement | null = document.body;\n\n          if (fullScreenButton.dataset.bsTarget) {\n            el = document.querySelector(fullScreenButton.dataset.bsTarget);\n          }\n\n          if (el) {\n            el.requestFullscreen?.()\n            || el.mozRequestFullscreen?.()\n            || el.webkitRequestFullscreen?.();\n          }\n        } else {\n          document.cancelFullscreen?.()\n          || document.mozCancelFullScreen?.()\n          || document.webkitCancelFullScreen?.();\n        }\n      })\n    }\n  }\n}\n\nu.use(NexusTheme);\n\nconst nexus = u.inject<NexusTheme>('$nexus');\n\nnexus.initRipple();\nnexus.initSidebarToggle();\nnexus.initSidebarMenu();\nnexus.initFullscreen();\n\ndeclare global {\n  interface HTMLElement {\n    mozRequestFullscreen?: Function;\n    webkitRequestFullscreen?: Function;\n  }\n  interface Document {\n    cancelFullscreen?: Function;\n    mozCancelFullScreen?: Function;\n    webkitCancelFullScreen?: Function;\n  }\n}\n"]}